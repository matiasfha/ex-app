(function(){var e,t,n;e=function(){function e(){this.first=null,this.last=null,this.length=0}return e.prototype.append=function(e){var t;if(!!e)return t={data:e,next:null,prev:null},this.first?(this.last.next=t,t.prev=this.last,this.last=t):(this.first=t,this.last=t),this.length++},e.prototype.remove=function(e){if(!!e)return e.prev?e.prev.next=e.next:(this.first=e.next,this.first&&(this.first.prev=null)),this.length--},e}(),n,t=function(){function t(){}var r,i,s,o,u,f,l;return u=function(e){return e.constructor===Array},l=function(e){return e.constructor===Function},f=function(e){return e.constructor===Date},i=function(t){return r[t]={subs:new e,history:new e,constructor:function(){}}},r={},t.prototype.deliver=function(){var e,t,s;s=arguments[0],r[s]||i(s),e=[].slice.call(arguments,1),e||(e=[]),u(e)||(e=[e]),e={created:new Date,lastPublished:new Date,args:e},r[s].history.append(e),t=r[s].subs.first;while(t)t.data.apply(this,e.args),t=t.next;return n},t.prototype.deliverSync=function(e,t){var s;r[e]||i(e),t||(t=[]),u(t)||(t=[t]),t={created:new Date,lastPublished:new Date,args:t},r[e].history.append(t),s=r[e].subs.first;while(s)setTimeout(function(e){return function(){return e.data.apply(this,t.args)}}(s),0),s=s.next;return n},t.prototype.receive=function(e,t,s){var o;r[e]||i(e),r[e].subs.append(t);if(!s){o=r[e].history.first;while(o)t.apply(this,o.data.args),o.data.lastPublished=new Date,o=o.next;return n}},t.prototype.retract=function(t,s){var o,u;r[t]||i(t);if(!s)r[t].subs=new e;else{u=r[t].subs,o=u.first;while(o)o.data===s&&u.remove(o),o=o.next}return n},t.prototype.dropMessages=function(t,u){return r[t]||i(t),u?(l(u)&&(r[t].history=o(u,r[t].history)),f(u)&&(r[t].history=s(u,r[t].history))):r[t].history=new e,n.deliver("dropMessage."+t)},o=function(e,t){var n;n=t.first;while(n)e.apply(n.data)&&t.remove(n),n=n.next;return t},s=function(e,t){var n;n=t.first;while(n)n.data.created<e&&t.remove(n),n=n.next;return t},t}(),n=new t,this.LinkedList=e,this.postman=n}).call(this);