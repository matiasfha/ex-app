(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};namespace("Dandoo.Recursos").Subir=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.el=$("body"),n.prototype.events={'change input[type="radio"]':"changeTipoSubida","change #resource_imagen":"previewAvatar"},n.prototype.initialize=function(){return console.log("Subir")},n.prototype.changeTipoSubida=function(e){var t,n,r;if($(e.currentTarget).is(":checked"))return t=$("div.imagen"),n=$("div.video"),$(".activoRadio").removeClass("activoRadio"),r=$(e.currentTarget).parent(),r.addClass("activoRadio"),r.hasClass("publicaVideo")?(t.hide(),$("#resource_imagen").val(""),$("div.preview").empty(),n.show()):(n.hide(),$("#resource_url").val(""),t.show())},n.prototype.previewAvatar=function(e){var t;return t=FileAPI.getFiles($("#resource_imagen")),t=t[0],FileAPI.readAsDataURL(t,function(e){var t,n,r,i,s;switch(e.type){case"load":return s=$("<div></div>").css({position:"absolute",left:"-999999px",width:"400px",height:"600px"}).appendTo($("body")),i=1,r=1,n=$("<img>"),n.attr("src",e.result).load(function(e){var t;return t=$(this),$(this).appendTo(s),$(this).imagesLoaded(function(){var e,n;return i=t.width(),r=t.height(),s.remove(),n=150,e=150,i>r?i>n&&(r*=n/i,i=n):r>e&&(i*=e/r,r=e),t.attr("width",i),t.attr("height",r),$("div.preview").html(t)})});case"progress":return $("div.preview").animate({opacity:e.loaded/e.total*100});default:return t="<span>No se puede mostrar un preview del nuevo Avatar, tu Navegador no lo soporta.<br />Aún así podrá actualizarse sin problemas</span>",$("div.preview").html(t)}})},n}(Backbone.View)}).call(this);